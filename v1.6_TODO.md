# v1.6 UI Refinement TODO List

## Phase 1: Database Schema Update
- [x] **Modify `sessions` Table:**
  - [x] Add a `prompt_id` column to the `sessions` table.
  - [x] This column will be a foreign key referencing the `id` in the `prompts` table.
- [x] **Update `DBManager`:**
  - [x] Modify the `create_tables` method to include the new `prompt_id` column.
  - [x] Create a new method `get_sessions_by_prompt` to retrieve all sessions for a given prompt.
  - [x] Update the `save_session` method to include the `prompt_id`.

## Phase 2: UI Redesign
- [x] **Update `MainView` Layout:**
  - [x] Replace the `prompt_selector` `CTkOptionMenu` with a `CTkListbox`.
  - [x] Remove the "Load Game" button.
- [x] **Implement New UI Logic:**
  - [x] Bind a selection event to the prompt listbox. When a prompt is selected, the session listbox should be updated with the sessions for that prompt.
  - [x] Bind a selection event to the session listbox. When a session is selected, the game should be loaded.
  - [x] The "New Game" button should create a new session associated with the currently selected prompt.

## Phase 3: Backend Integration
- [x] **Update `MainView` Methods:**
  - [x] Modify the `new_game` method to create a new session with the selected prompt's ID.
  - [x] Modify the `load_game` method to be called when a session is selected from the list.
  - [x] Update the `refresh_session_list` method to take a `prompt_id` as an argument.
- [x] **Update `Orchestrator`:**
  - [x] The orchestrator may need to be updated to handle the new session creation and loading logic.

## Phase 4: Refinement and Testing
- [x] **Test New UI Flow:**
  - [x] Thoroughly test the new UI to ensure that creating, loading, and saving games works as expected.
- [x] **Update Documentation:**
  - [x] Update `docs/ui.md` and any other relevant documentation to reflect the new UI design.